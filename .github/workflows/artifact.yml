name: artifact-build

on:
 push:

jobs:
 build:
   runs-on: ubuntu-latest
   steps:
     -
       name: Code checkout
       uses: actions/checkout@v2
     -
       uses: pguyot/arm-runner-action@v2
       id: build_image
       with:
        base_image: raspi_4_bullseye:20220121
        commands: |
          sudo apt install -y libgl1-mesa-dev libglu1-mesa-dev build-essential cmake python3-pip python3-setuptools patchelf desktop-file-utils libgdk-pixbuf2.0-dev fakeroot strace fuse libgtk-3-dev m4 zstd screen ninja-build
          sudo wget https://github.com/AppImage/AppImageKit/releases/download/continuous/appimagetool-aarch64.AppImage -O /usr/local/bin/appimagetool
          sudo chmod +x /usr/local/bin/appimagetool
          sudo pip3 install appimage-builder
          ./autobuild.sh